## 技術的演化與分類

區塊鏈技術自比特幣網路中首次被大規模應用，到今天應用在越來越多的分散式記帳場景中。

### 區塊鏈的演化

比特幣區塊鏈面向轉帳場景，支持簡單的腳本計算。很自然想到如果引入更多複雜的計算邏輯，將能支持更多應用場景，這就是智能合約（Smart Contract）。智能合約可以提供除了貨幣交易功能外更靈活的合約功能，執行更為複雜的操作。

引入智能合約後的區塊鏈，已經超越了單純數據記錄功能了，實際上帶有點“智能計算”的意味了；更進一步地，還可以為區塊鏈加入權限管理，高級編程語言支持等，實現更強大的、支持更多商用場景的分散式帳本系統。

從計算特點上，可以看到現有區塊鏈技術的三種典型演化場景：

| 場景 | 功能 | 智能合約 | 一致性 | 權限 | 類型 | 性能 | 編程語言 | 代表 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 數位貨幣 | 記帳功能 | 不帶有或較弱 | PoW | 無 | 公有鏈 | 較低 | 簡單腳本 | 比特幣網路 |
| 分散式應用引擎 | 智能合約 | 圖靈完備 | PoW、PoS | 無 | 公有鏈 | 受限 | 特定語言 | 以太坊網路 |
| 帶權限的分散式帳本 | 商業處理 | 多種語言，圖靈完備 | 包括 CFT、BFT 在內的多種機制，可插拔 | 支持 | 聯盟鏈 | 可擴展 | 高級編程語言 | 超級帳本 |

### 區塊鏈與分散式記帳

![複式記帳的帳本](_images/ledger.jpg)

[現代複式記帳系統](https://zh.wikipedia.org/wiki/%E5%A4%8D%E5%BC%8F%E7%B0%BF%E8%AE%B0)最早出現在文藝復興時期的意大利，直到今天仍是會計學科的核心方法。複式記帳法對每一筆帳目同時記錄來源和去向，首次將對帳驗證功能嵌入記帳過程，提升了記帳過程的可靠性和可追查性。區塊鏈則實現了完整交易歷史的記錄和保護。

從這個角度來看，**區塊鏈是首個自帶對帳功能的數位帳本結構**。

更廣泛地，區塊鏈實現了去中心化的記錄。參與到系統中的節點，並不屬於同一組織，彼此可以信任或不信任；鏈上數據由所有節點共同維護，每個節點都存儲一份完整或部分的記錄拷貝。

跟傳統的記帳技術相比，基於區塊鏈的分散式帳本包括如下特點：

* 維護一條不斷增長的鏈，只可能添加記錄，而且記錄一旦確認則不可篡改；
* 去中心化，或者說多中心化的共識，無需集中的控制，實現上儘量分散式；
* 通過密碼學的機制來確保交易無法被抵賴和破壞，並儘量保護用戶信息和記錄的隱私性。

### 技術分類

根據參與者的不同，可以分為公有（Public）鏈、聯盟（Consortium）鏈和私有（Private）鏈。

公有鏈，顧名思義，任何人都可以參與使用和維護，參與者多為匿名。典型的如比特幣和以太坊區塊鏈，信息是完全公開的。

如果進一步引入許可機制，可以實現私有鏈和聯盟鏈兩種類型。

私有鏈，由集中管理者進行管理限制，只有內部少數人可以使用，信息不公開。一般認為跟傳統中心化記帳系統的差異不明顯。

聯盟鏈則介於兩者之間，由若干組織一起合作（如供應鏈機構或銀行聯盟等）維護一條區塊鏈，該區塊鏈的使用必須是帶有權限的限制訪問，相關信息會得到保護，典型如超級帳本專案。在架構上，現有大部分區塊鏈在實現都至少包括了網路層、共識層、智能合約和應用層等分層結構，聯盟鏈實現往還會引入額外的權限管理機制。

目前來看，公有鏈信任度最高，也容易引發探討，但短期內更多的應用會首先在聯盟鏈上落地。公有鏈因為要面向匿名公開的場景，面臨著更多的安全挑戰和風險；同時為了支持互聯網尺度的交易規模，需要更高的可擴展性。這些技術問題在短期內很難得到解決。

對於信任度和中心化程度的關係，對於大部分場景都可以繪製如下所示的曲線。一般地，去中心化程度越高，信任度會越好。但兩者的關係並非線性那麼簡單。隨著節點數增加，前期的信任度往往會增長較快，到了一定程度後，信任度隨節點數增多並不會得到明顯改善。這是因為隨著成員數的增加，要實現共謀作惡的成本會指數上升。

![信任度和去中心化程度](_images/trust_curve.png)

另外，根據使用目的和場景的不同，又可以分為以數位貨幣為目的的貨幣鏈，以記錄產權為目的的產權鏈，以眾籌為目的的眾籌鏈等，也有不侷限特定應用場景的所謂通用鏈。通用鏈因為要兼顧不同場景下的應用特點，在設計上需要考慮更加全面。
